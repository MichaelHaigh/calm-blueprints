{"status":{},"spec":{"description":"","resources":{"client_attrs":{"None":{"y":479.9999847412,"x":830.1171875},"oscar_django_deployment":{"y":377.9999847412,"x":1077.1171875},"c88c5b11-d9c5-e9a1-a26f-490b9f79a9c9":{"y":143,"x":479},"3f6c02d5-d450-ba1a-01d5-d3f76b45a810":{"y":229,"x":765.75},"aa486abe_deployment":{"y":587.9748532458,"x":1350.4267333191},"f6be2786_deployment":{"y":230.2343657342,"x":781.7967545449},"190a497f-1b97-7f0f-f453-b713469713e3":{"y":644.9999923706,"x":594.30859375},"c4908d01-9587-2636-e8e6-80b494f970b3":{"y":377.9999847412,"x":1077.1171875},"53643d97_deployment":{"y":528.9397944199,"x":570.090187413},"f9a4c530_deployment":{"y":143,"x":479},"918aa0d0_deployment":{"y":210.810872372,"x":1335.5952864441}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Buckets"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5aace26a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ce790098_runbook","main_task_local_reference":{"kind":"app_task","name":"5aace26a_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Buckets"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5a12a028_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"75076e9d_runbook","main_task_local_reference":{"kind":"app_task","name":"5a12a028_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Buckets"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3007638a_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"92876d72_runbook","main_task_local_reference":{"kind":"app_task","name":"3007638a_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Buckets"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d6ce3cfc_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b72dde52_runbook","main_task_local_reference":{"kind":"app_task","name":"d6ce3cfc_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Buckets"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e0befeaf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a45fb408_runbook","main_task_local_reference":{"kind":"app_task","name":"e0befeaf_dag"},"variable_list":[]},"name":"action_stop"}],"depends_on_list":[],"name":"Buckets","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Django"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"61a78ac6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"dff28977_runbook","main_task_local_reference":{"kind":"app_task","name":"61a78ac6_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Django"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"20625665_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"7947afce_runbook","main_task_local_reference":{"kind":"app_task","name":"20625665_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Django"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"f87f0346_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c04dc25d_runbook","main_task_local_reference":{"kind":"app_task","name":"f87f0346_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Django"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"293e66a2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"5d792569_runbook","main_task_local_reference":{"kind":"app_task","name":"293e66a2_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Django"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"b1e6f5a8_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e8f603b7_runbook","main_task_local_reference":{"kind":"app_task","name":"b1e6f5a8_dag"},"variable_list":[]},"name":"action_stop"}],"depends_on_list":[{"kind":"app_service","name":"Buckets"},{"kind":"app_service","name":"Postgres"}],"name":"Django","port_list":[],"tier":"","container_spec":{"name":"oscar-django-329fe36","env":[{"name":"DATABASE_USER","value":"postgres"},{"name":"DATABASE_PASSWORD","value":"@@{db_password}@@"},{"name":"DATABASE_HOST","value":"@@{Era.DB_SERVER_IP}@@"},{"name":"DATABASE_NAME","value":"@@{Era.DB_NAME}@@"},{"name":"ACCESS_KEY","value":"@@{buckets_creds.username}@@"},{"name":"SECRET_ACCESS_KEY","value":"@@{buckets_creds.secret}@@"},{"name":"STATIC_BUCKET","value":"@@{buckets_name}@@"},{"name":"S3_ENDPOINT_URL","value":"http:\/\/@@{buckets_ip}@@\/"},{"name":"DUMMY_HOST","value":"@@{Postgres.address}@@"}],"ports":[{"containerPort":8000}]},"variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0bfadcbf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"975ed99a_runbook","main_task_local_reference":{"kind":"app_task","name":"0bfadcbf_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9ade3d68_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"cf884050_runbook","main_task_local_reference":{"kind":"app_task","name":"9ade3d68_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1124d60e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"6bcf94d3_runbook","main_task_local_reference":{"kind":"app_task","name":"1124d60e_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"0ae24e3c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"84c12573_runbook","main_task_local_reference":{"kind":"app_task","name":"0ae24e3c_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"bf858e3b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"6e2e5ff2_runbook","main_task_local_reference":{"kind":"app_task","name":"bf858e3b_dag"},"variable_list":[]},"name":"action_stop"}],"depends_on_list":[],"name":"Era","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","description":"","name":"CLEANUP_OPERATION_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"CLUSTER_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"COMPUTE_PROF_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"CREATE_OPERATION_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_ENTITY_NAME","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_NAME","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_PARAM_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_SERVER_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DB_SERVER_IP","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"DEREGISTER_OPERATION_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"NETWORK_PROF_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"SLA_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"SOFTWARE_PROF_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}},{"val_type":"STRING","description":"","name":"TIMESTAMP","type":"LOCAL","value":"","label":"","attrs":{"type":""}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6fba9cbb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"01945104_runbook","main_task_local_reference":{"kind":"app_task","name":"6fba9cbb_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"8bee20f0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"fe42eb38_runbook","main_task_local_reference":{"kind":"app_task","name":"8bee20f0_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"04cc6e24_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ffd25064_runbook","main_task_local_reference":{"kind":"app_task","name":"04cc6e24_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"9d7e4dfb_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ef6acd35_runbook","main_task_local_reference":{"kind":"app_task","name":"9d7e4dfb_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"897e9b24_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"b81e8f8b_runbook","main_task_local_reference":{"kind":"app_task","name":"897e9b24_dag"},"variable_list":[]},"name":"action_stop"}],"depends_on_list":[{"kind":"app_service","name":"Era"}],"name":"Postgres","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"1CreateMap"}],"name":"45eddae0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1CreateMap","attrs":{"exit_status":[],"script":"# Set the headers and the payload\nheaders = {'Content-Type': 'application\/json', 'x-app-key': '@@{epoch_key.secret}@@', 'Accept': 'application\/json'}\npayload = {\n  \"name\": \"@@{calm_application_name}@@\",\n  \"defaultView\": \"topology\",\n  \"spec\":\n  {\n    \"groupby\": [\"pod_name\"],\n    \"filter\":\n    [\n      {\n        \"filterValue\": \"@@{oscar_django_deployment.platform.metadata.name}@@\",\n        \"selectedValue\": \"@@{oscar_django_deployment.platform.metadata.name}@@\",\n        \"type\": \"all_values\",\n        \"key\":\"host_name\",\n        \"type\":\"match\",\n        \"key\":\"tags.kube_deployment\"\n      }\n    ],\n    \"enable_one_hop\": True,\n    \"one_hop_groupby\": [\"layer4_port\"]\n  },\n  \"showLinks\":True,\n  \"showLinkMetrics\":True\n}\n\n# Set the URL and make the call to create the map\nurl  = \"https:\/\/@@{address}@@\/auth-api\/topology-map\"\nresp = urlreq(url, verb='POST', params=json.dumps(payload), headers=headers)\n\n# Parse the response appropriately, if successful, save the ID in a variable to be used for map deletion\nif resp.ok:\n  print \"Epoch Map successfully created\"\n  print \"MAP_ID={0}\".format(json.loads(resp.content)['id'])\nelse:\n  print \"Epoch Map creation failed\"\n  exit(1)","eval_variables":["MAP_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"349349d5_runbook","main_task_local_reference":{"kind":"app_task","name":"45eddae0_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5a295ee5_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"dce5e91c_runbook","main_task_local_reference":{"kind":"app_task","name":"5a295ee5_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"80192c0d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f44655e9_runbook","main_task_local_reference":{"kind":"app_task","name":"80192c0d_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"35706446_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"065dcb6e_runbook","main_task_local_reference":{"kind":"app_task","name":"35706446_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d567c158_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"6796b9b5_runbook","main_task_local_reference":{"kind":"app_task","name":"d567c158_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"Django"}],"name":"Epoch","port_list":[],"tier":"","variable_list":[{"val_type":"STRING","description":"","name":"MAP_ID","type":"LOCAL","value":"","label":"","attrs":{"type":""}}],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"aa257805_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"cb1fdff5_runbook","main_task_local_reference":{"kind":"app_task","name":"aa257805_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"2ff78cbe_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"f35a1b07_runbook","main_task_local_reference":{"kind":"app_task","name":"2ff78cbe_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"1GenerateLoad"}],"name":"910c00cc_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1GenerateLoad","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# Nohup the locust load command and send output to log file\nnohup locust --host=http:\/\/@@{oscar_django_service.ingress}@@ --no-web -c 3 -r 3 >> locust.log 2>&1 &\nsleep 5","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"centos_creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"3b517061_runbook","main_task_local_reference":{"kind":"app_task","name":"910c00cc_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a4d7fe3b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"2635c587_runbook","main_task_local_reference":{"kind":"app_task","name":"a4d7fe3b_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"5fe5d544_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"89943125_runbook","main_task_local_reference":{"kind":"app_task","name":"5fe5d544_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"Django"}],"name":"Locust","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"EXISTING_VM","name":"EraServer","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"era_creds"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{era_ip}@@"},"variable_list":[]},{"description":"","action_list":[],"type":"EXISTING_VM","name":"Era_PostgreSQL_DB","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{Era.DB_SERVER_IP}@@"},"variable_list":[]},{"description":"","action_list":[],"type":"EXISTING_VM","name":"Object_Storage_Bucket","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"buckets_creds"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{buckets_ip}@@"},"variable_list":[]},{"description":"","action_list":[],"type":"K8S_POD","name":"Oscar","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"","delay_secs":"60","connection_port":22},"os_type":"Linux","create_spec":{"metadata":{"labels":{"tier":"frontend","app":"django-@@{Era.TIMESTAMP}@@","component":"oscar"},"namespace":"@@{kube_namespace}@@","name":"Oscar_Django"},"type":"PROVISION_K8S_POD","spec":{},"account_uuid":"2543dc17-edba-efd1-2421-9e3f57fcfca0"},"variable_list":[]},{"description":"","action_list":[],"type":"EXISTING_VM","name":"Xi_Epoch","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":true,"address":"@@{ip_address}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"epoch_key"}},"os_type":"Linux","create_spec":{"type":"PROVISION_EXISTING_MACHINE","address":"@@{epoch_prefix}@@.epoch.nutanix.com"},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"LoadGenerator","readiness_probe":{"connection_type":"SSH","retries":"5","disable_readiness_probe":false,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","connection_port":22,"login_credential_local_reference":{"kind":"app_credential","name":"centos_creds"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"locust-@@{calm_application_name}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0e26c135-d478-428e-9fb8-22c0acfa5f3a"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{centos_public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"CentOS_7_Cloud_Image","uuid":"752d4c52-275e-8e8d-2030-ff7149338c2a"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"poseidon_access","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"buckets_creds"},{"username":"era","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"db_server_creds"},{"username":"admin","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"era_creds"},{"username":"admin","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"kube_creds"},{"username":"token","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"epoch_key"},{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"centos_creds"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Buckets"}],"name":"BucketsPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"BucketsPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"9cec0ad1_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"744e24d7_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"9cec0ad1_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"BucketsPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"e2ef1489_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"3e7995ae_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e2ef1489_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Era"}],"name":"EraPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1GetClusterID"},{"kind":"app_task","name":"2GetProfileIDs"},{"kind":"app_task","name":"3GetSLAID"},{"kind":"app_task","name":"4ProvisionDB"},{"kind":"app_task","name":"5MonitorOperation"},{"kind":"app_task","name":"6GetDatabaseInfo"}],"name":"7bd63f34_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"1GetClusterID"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"2GetProfileIDs"}},{"from_task_reference":{"kind":"app_task","name":"2GetProfileIDs"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"3GetSLAID"}},{"from_task_reference":{"kind":"app_task","name":"3GetSLAID"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"4ProvisionDB"}},{"from_task_reference":{"kind":"app_task","name":"5MonitorOperation"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"6GetDatabaseInfo"}},{"from_task_reference":{"kind":"app_task","name":"4ProvisionDB"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"5MonitorOperation"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1GetClusterID","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Cluster ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/clusters\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"CLUSTER_ID={0}\".format(json.loads(resp.content)[0]['id'])\nelse:\n  print \"Get Cluster ID request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["CLUSTER_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"2GetProfileIDs","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get Software Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Software&name=@@{software_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"SOFTWARE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\nelse:\n  print \"Get Software Profile ID request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)\n\n# Get Compute Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Compute&name=@@{compute_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"COMPUTE_PROF_ID={0}\".format(json.loads(resp.content)['id'])\nelse:\n  print \"Get Compute Profile ID request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)\n\n# Get Network Profile ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Network&name=@@{network_profile}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"NETWORK_PROF_ID={0}\".format(json.loads(resp.content)['id'])\nelse:\n  print \"Get Network Profile ID request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)\n\n# Get DB Parameter ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/profiles?type=Database_Parameter&name=@@{database_parameter}@@\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"DB_PARAM_ID={0}\".format(json.loads(resp.content)['id'])\nelse:\n  print \"Get DB Parameter ID request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)\n\n# Set the timestamp to be used throughout the rest of the blueprint\nprint \"TIMESTAMP={0}\".format(@@{calm_time(\"%Y%m%d%H%M\")}@@)","eval_variables":["COMPUTE_PROF_ID","DB_PARAM_ID","NETWORK_PROF_ID","SOFTWARE_PROF_ID","TIMESTAMP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"3GetSLAID","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the db_name here, so we don't have the calm_time macro expanding at two different times\nprint \"DB_NAME=@@{db_name_prefix}@@_@@{TIMESTAMP}@@\"\n#print \"DB_NAME=@@{db_name_prefix}@@_{0}\".format(@@{calm_time(\"%Y%m%d%H%M\")}@@)\n\n# Get the list of SLAs\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/slas\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n\n# Find the desired SLA, and set the corresponding ID to the variable\nif resp.ok:\n  for sla in json.loads(resp.content):\n    if sla['name'] == \"@@{sla_name}@@\":\n      print \"SLA_ID={0}\".format(sla['id'])\nelse:\n  print \"Get SLA request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["DB_NAME","SLA_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"4ProvisionDB","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Set the URL and payload\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/provision\"\npayload = {\n  \"databaseName\": \"@@{DB_NAME}@@\",\n  \"databaseType\": \"postgres_database\",\n  \"databaseDescription\": \"Postgres database provisioned by Calm Application @@{calm_application_name}@@\",\n  \"clusterId\": \"@@{CLUSTER_ID}@@\",\n  \"softwareProfileId\": \"@@{SOFTWARE_PROF_ID}@@\",\n  \"computeProfileId\": \"@@{COMPUTE_PROF_ID}@@\",\n  \"networkProfileId\": \"@@{NETWORK_PROF_ID}@@\",\n  \"dbParameterProfileId\": \"@@{DB_PARAM_ID}@@\",\n  \"provisionInfo\": [\n    {\n      \"name\": \"application_type\",\n      \"value\": \"postgres_database\"\n    },\n    {\n      \"name\": \"listener_port\",\n      \"value\": \"5432\"\n    },\n    {\n      \"name\": \"database_size\",\n      \"value\": \"200\"\n    },\n    {\n      \"name\": \"working_dir\",\n      \"value\": \"\/tmp\"\n    },\n    {\n      \"name\": \"auto_tune_staging_drive\",\n      \"value\": True\n    },\n    {\n      \"name\": \"db_password\",\n      \"value\": \"@@{db_password}@@\"\n    },\n    {\n      \"name\": \"dbserver_name\",\n      \"value\": \"PostgreSQL-@@{calm_time}@@\"\n    },\n    {\n      \"name\": \"dbserver_description\",\n      \"value\": \"Postgres database server provisioned by Calm Application @@{calm_application_name}@@\"\n    },\n    {\n      \"name\": \"ssh_public_key\",\n      \"value\": \"@@{db_public_key}@@\"\n    }\n  ],\n  \"timeMachineInfo\": {\n    \"name\": \"PostgreSQL-@@{calm_time}@@_TM\",\n    \"description\": \"PostgreSQL-@@{calm_time}@@ time machine\",\n    \"slaId\": \"@@{SLA_ID}@@\",\n    \"schedule\": {\n      \"continuousSchedule\": {\n        \"enabled\": True,\n        \"logBackupInterval\": 30,\n        \"snapshotsPerDay\": 30\n      },\n      \"snapshotTimeOfDay\": {\n        \"hours\": 1,\n        \"minutes\": 0,\n        \"seconds\": 0\n      },\n      \"weeklySchedule\": {\n        \"enabled\": True,\n        \"dayOfWeek\": \"SUNDAY\"\n      },\n      \"monthlySchedule\": {\n        \"enabled\": True,\n        \"dayOfMonth\": 1\n      },\n      \"quartelySchedule\": {\n        \"enabled\": True,\n        \"startMonth\": \"JANUARY\",\n        \"dayOfMonth\": 1\n      },\n      \"yearlySchedule\": {\n        \"enabled\": False,\n        \"month\": \"DECEMBER\",\n        \"dayOfMonth\": 1\n      }\n    }\n  }\n}\n\n# Make the call and set the response operation ID to the variable\nresp = urlreq(url, verb='POST', auth='BASIC', user=era_user, passwd=era_pass, params=json.dumps(payload), headers=headers)\nif resp.ok:\n  print \"CREATE_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])\nelse:\n  print \"Post Database create request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["CREATE_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"5MonitorOperation","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CREATE_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 60 seconds.\"\n  sleep(60)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break\n\n# If the operation did not complete within 20 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  print \"Get Operation ID timed out\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)\n\n# Get the newly provision DB Entity Name and set it to a variable\nprint \"DB_ENTITY_NAME={0}\".format(json.loads(resp.content)['entityName'])","eval_variables":["DB_ENTITY_NAME"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"6GetDatabaseInfo","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Get DB Server IP and ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/name\/@@{DB_ENTITY_NAME}@@?detailed=true\"\nresp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"DB_SERVER_IP={0}\".format(json.loads(resp.content)['hostIP'])\n  print \"DB_ID={0}\".format(json.loads(resp.content)['id'])\n  print \"DB_SERVER_ID={0}\".format(json.loads(resp.content)['primaryHost'])\nelse:\n  print \"Get DB infor request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["DB_ID","DB_SERVER_ID","DB_SERVER_IP"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]}],"description":"","name":"a56589a3_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"7bd63f34_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EraPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1CleanupDB"},{"kind":"app_task","name":"2MonitorCleanupOp"},{"kind":"app_task","name":"3DeregisterDBServer"},{"kind":"app_task","name":"4MonitorDeregOp"}],"name":"99b487fd_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"1CleanupDB"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"2MonitorCleanupOp"}},{"from_task_reference":{"kind":"app_task","name":"3DeregisterDBServer"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"4MonitorDeregOp"}},{"from_task_reference":{"kind":"app_task","name":"2MonitorCleanupOp"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"3DeregisterDBServer"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1CleanupDB","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/databases\/@@{DB_ID}@@?storage-cleanup=true&tm-cleanup=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"CLEANUP_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])\nelse:\n  print \"Cleanup DB Operation failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["CLEANUP_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"2MonitorCleanupOp","state":"ACTIVE","attrs":{"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{CLEANUP_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  print \"Cleanup Operation timed out\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"3DeregisterDBServer","state":"ACTIVE","attrs":{"exit_status":[],"script":"# Set creds and headers\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\n# Cleanup the DB and get Operation ID\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/dbservers\/@@{DB_SERVER_ID}@@?remove=false&soft-remove=false&delete=true&delete-vm-snapshots=true&delete-vgs=true\"\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\nif resp.ok:\n  print \"DEREGISTER_OPERATION_ID={0}\".format(json.loads(resp.content)['operationId'])\nelse:\n  print \"Deregister DB Server Operation failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","eval_variables":["DEREGISTER_OPERATION_ID"],"eval_scope":"local","type":"","script_type":"static"},"timeout_secs":"0","type":"SET_VARIABLE","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Era"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"4MonitorDeregOp","state":"ACTIVE","attrs":{"script":"# Set creds, headers, and URL\nera_user = '@@{era_creds.username}@@'\nera_pass = '@@{era_creds.secret}@@'\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\nurl     = \"https:\/\/@@{era_ip}@@:8443\/era\/v0.8\/operations\/@@{DEREGISTER_OPERATION_ID}@@\"\n\n# Monitor the operation\nfor x in range(20):\n  \n  print \"Sleeping for 30 seconds.\"\n  sleep(30)\n  resp = urlreq(url, verb='GET', auth='BASIC', user=era_user, passwd=era_pass, headers=headers)\n  print \"Percentage Complete: {0}\".format(json.loads(resp.content)['percentageComplete'])\n  \n  # If complete, break out of loop\n  if json.loads(resp.content)['percentageComplete'] == \"100\":\n    break    \n\n# If the operation did not complete within 10 minutes, assume it's not successful and error out\nif json.loads(resp.content)['percentageComplete'] != \"100\":\n  print \"Deregistration Operation timed out\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"a8f36ab1_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"99b487fd_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"image_spec":{"image":"michaelatnutanix\/oscar_jet:latest","imagePullPolicy":"Always"},"description":"","action_list":[],"type":"K8S_IMAGE","service_local_reference_list":[{"kind":"app_service","name":"Django"}],"name":"Package3","version":"","variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Postgres"}],"name":"PostgresPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PostgresPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"CreateMigration"},{"kind":"app_task","name":"InstallCollector"}],"name":"58ca4a03_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"CreateMigration"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"InstallCollector"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"CreateMigration","state":"ACTIVE","attrs":{"script":"url     = \"https:\/\/@@{kubemaster_ip}@@:443\/apis\/batch\/v1\/namespaces\/@@{kube_namespace}@@\/jobs\"\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\npayload = {\n  \"apiVersion\": \"batch\/v1\",\n  \"kind\": \"Job\",\n  \"metadata\": {\n    \"name\": \"oscar-django-migrations-@@{calm_application_uuid}@@\",\n    \"labels\": {\n      \"app\": \"django\",\n      \"component\": \"oscar\",\n      \"tier\": \"frontend\"\n    }\n  },\n  \"spec\": {\n    \"template\": {\n      \"metadata\": {\n        \"labels\": {\n          \"app\": \"django\",\n          \"component\": \"oscar\",\n          \"tier\": \"frontend\"\n        }\n      },\n      \"spec\": {\n        \"containers\": [\n          {\n            \"name\": \"django\",\n            \"image\": \"michaelatnutanix\/oscar_jet:latest\",\n            \"imagePullPolicy\": \"Always\",\n            \"command\": [\n              \"\/bin\/bash\",\n              \"migrate.sh\"\n            ],\n            \"env\": [\n              {\n                \"name\": \"DATABASE_USER\",\n                \"value\": \"postgres\"\n              },\n              {\n                \"name\": \"DATABASE_PASSWORD\",\n                \"value\": \"@@{db_password}@@\"\n              },\n              {\n                \"name\": \"DATABASE_HOST\",\n                \"value\": \"@@{Era.DB_SERVER_IP}@@\"\n              },\n              {\n                \"name\": \"DATABASE_NAME\",\n                \"value\": \"@@{Era.DB_NAME}@@\"\n              },\n              {\n                \"name\": \"ACCESS_KEY\",\n                \"value\": \"@@{buckets_creds.username}@@\"\n              },\n              {\n                \"name\": \"SECRET_ACCESS_KEY\",\n                \"value\": \"@@{buckets_creds.secret}@@\"\n              },\n              {\n                \"name\": \"STATIC_BUCKET\",\n                \"value\": \"@@{buckets_name}@@\"\n              },\n              {\n                \"name\": \"S3_ENDPOINT_URL\",\n                \"value\": \"http:\/\/@@{buckets_ip}@@:7200\/\"\n              }\n            ]\n          }\n        ],\n        \"restartPolicy\": \"Never\"\n      }\n    },\n    \"backoffLimit\": 5\n  }\n}\n\nkube_user = '@@{kube_creds.username}@@'\nkube_pass = '@@{kube_creds.secret}@@'\n\nresp = urlreq(url, verb='POST', auth='BASIC', user=kube_user, passwd=kube_pass, params=json.dumps(payload), headers=headers)\n\nif resp.ok:\n  print json.dumps(json.loads(resp.content), indent=4)\nelse:\n  print \"Post K8S Job request failed\", json.dumps(json.loads(resp.content), indent=4)\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"InstallCollector","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo wget --header=\"userport: 443\" -O \/usr\/bin\/install-epoch-collectors.sh https:\/\/michael.epoch.nutanix.com\/install_epoch_collectors \\\n     && sudo chmod +x \/usr\/bin\/install-epoch-collectors.sh \\\n     && sudo EPOCH_AOC_HOST=michael.epoch.nutanix.com EPOCH_ORGANIZATION_ID=ce34ba5e-4c31-4358-b97a-ae0ce1659e5b EPOCH_INTERFACE=any EPOCH_ANALYSIS_DEPTH=layer7 EPOCH_L7_SAMPLINGRATE=20  \/usr\/bin\/install-epoch-collectors.sh \\\n     && sudo \/etc\/init.d\/epoch-collectors restart","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"db_server_creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8b1f1a7b_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"58ca4a03_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"PostgresPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"DeleteMigration"}],"name":"ee8bedbe_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Postgres"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"DeleteMigration","state":"ACTIVE","attrs":{"script":"url     = \"https:\/\/@@{kubemaster_ip}@@:443\/apis\/batch\/v1\/namespaces\/@@{kube_namespace}@@\/jobs\/oscar-django-migrations-@@{calm_application_uuid}@@\"\nheaders = {'Content-Type': 'application\/json', 'Accept': 'application\/json'}\n\npayload = {}\n\nkube_user = '@@{kube_creds.username}@@'\nkube_pass = '@@{kube_creds.secret}@@'\n\nresp = urlreq(url, verb='DELETE', auth='BASIC', user=kube_user, passwd=kube_pass, params=json.dumps(payload), headers=headers)\n\nprint json.dumps(json.loads(resp.content), indent=4)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"faacff5d_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"ee8bedbe_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Epoch"}],"name":"EpochPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EpochPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"6d6f6878_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"625cf9bf_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"6d6f6878_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"EpochPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1DeleteMap"}],"name":"ce17707e_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Epoch"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1DeleteMap","state":"ACTIVE","attrs":{"script":"# Set the headers\nheaders = {'Content-Type': 'application\/json', 'x-app-key': '@@{epoch_key.secret}@@', 'Accept': 'application\/json'}\n\n# Delete the Epoch Application Map\nurl  = \"https:\/\/@@{address}@@\/auth-api\/topology-map\/@@{MAP_ID}@@\"\nresp = urlreq(url, verb='DELETE', headers=headers)\n\n# Parse the response and print appropriate info\nif resp.ok:\n  print \"Epoch Map successfully deleted\"\nelse:\n  print \"Epoch Map deletion failed\"\n  exit(1)","type":"","command_line_args":"","exit_status":[],"script_type":"static"},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"fee609de_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"ce17707e_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"Locust"}],"name":"LocustPackage","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"LocustPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1InstallLocust"},{"kind":"app_task","name":"2CreateLocustFile"}],"name":"53015a74_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"1InstallLocust"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"2CreateLocustFile"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1InstallLocust","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# Install pip\nsudo yum -y install epel-release\nsudo yum -y install python-pip\nsudo -H pip install --upgrade pip\npip --version\n\n# Install locust\nsudo -H pip install locustio --ignore-installed","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"centos_creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"Locust"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"2CreateLocustFile","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# Write the locustfile to disk\ncat <<EOF >>locustfile.py\nfrom locust import HttpLocust, TaskSet, task\n\nclass MyTaskSet(TaskSet):\n    @task\n    def index(self):\n        print(\"Executing: index\")\n        self.client.get(\"\/en-gb\/\")\n\n    @task\n    def about(self):\n        print(\"Executing: about\")\n        self.client.get(\"\/about\/\")\n\n    @task\n    def nutanix(self):\n        print(\"Executing: nutanix_8\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/nutanix_8\/\")\n\n    @task\n    def fun_stuff(self):\n        print(\"Executing: fun-stuff_9\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/nutanix\/fun-stuff_9\/\")\n\n    @task\n    def threads(self):\n        print(\"Executing: threads_10\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/nutanix\/threads_10\/\")\n\n    @task\n    def workspace(self):\n        print(\"Executing: workspace_11\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/nutanix\/workspace_11\/\")\n\n    @task\n    def books(self):\n        print(\"Executing: books\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/\")\n\n    @task\n    def books2(self):\n        print(\"Executing: books page 2\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/?page=2\")\n\n    @task\n    def books3(self):\n        print(\"Executing: books page 3\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/?page=3\")\n\n    @task\n    def books4(self):\n        print(\"Executing: books page 4\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/?page=4\")\n\n    @task\n    def books5(self):\n        print(\"Executing: books page 5\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/?page=5\")\n\n    @task\n    def books6(self):\n        print(\"Executing: books page 6\")\n        self.client.get(\"\/en-gb\/catalogue\/category\/books_2\/?page=6\")\n\nclass MyLocust(HttpLocust):\n    task_set = MyTaskSet\nEOF","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"centos_creds"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"c69c5fb0_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"53015a74_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"LocustPackage"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"0bf52d8d_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"ad37b85e_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"0bf52d8d_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"CentOS_7_Cloud_Image","version":"","options":{"type":"","name":"CentOS_7_Cloud","resources":{"image_type":"DISK_IMAGE","checksum":{},"source_uri":"http:\/\/download.nutanix.com\/calm\/CentOS-7-x86_64-GenericCloud.qcow2","version":{"product_version":"7","type":"","product_name":"CentOS"},"architecture":"X86_64","type":""},"description":""},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"K8S_DEPLOYMENT","action_list":[],"depends_on_list":[],"name":"oscar_django_deployment","published_service_local_reference_list":[{"kind":"app_published_service","name":"oscar_django_service"}],"max_replicas":"100","package_local_reference_list":[{"kind":"app_package","name":"Package3"}],"substrate_local_reference":{"kind":"app_substrate","name":"Oscar"},"min_replicas":"6","options":{"type":"PROVISION_K8S_DEPLOYMENT","spec":{"replicas":"6","selector":{"matchLabels":{"app":"django-@@{Era.TIMESTAMP}@@"}}},"metadata":{"labels":{"tier":"frontend","app":"django-@@{Era.TIMESTAMP}@@","component":"oscar","time":"@@{calm_unique}@@"},"namespace":"@@{kube_namespace}@@","name":"oscar-django-deployment"}},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"53643d97_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"BucketsPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"Object_Storage_Bucket"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"f6be2786_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"PostgresPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"Era_PostgreSQL_DB"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"f9a4c530_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"EraPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"EraServer"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"918aa0d0_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"EpochPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"Xi_Epoch"},"min_replicas":"1","variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"depends_on_list":[],"name":"aa486abe_deployment","published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"LocustPackage"}],"substrate_local_reference":{"kind":"app_substrate","name":"LoadGenerator"},"min_replicas":"1","variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[{"val_type":"STRING","description":"","name":"buckets_ip","type":"LOCAL","value":"10.45.5.41","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"buckets_name","type":"LOCAL","value":"oscarstatic","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"compute_profile","type":"LOCAL","value":"DEFAULT_COMPUTE","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"database_parameter","type":"LOCAL","value":"DEFAULT_POSTGRES_PARAMS","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"db_name_prefix","type":"LOCAL","value":"oscar_django","label":"","editables":{"value":true}},{"val_type":"STRING","description":"","name":"db_password","type":"SECRET","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"db_public_key","type":"LOCAL","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDUm18acWv344TgOXBuOnozuSXytDuqKFVE0+x7CK\/dZ6Y331lBF+f8AE\/Ng3tzxvCDUeth3pa7XO\/Y95zc+hTLGROBmWdgidfykBi2FeQ6hZOcsUDslPUL3Ig8UpPzbOva276YP3266+1BGjLi14neBSJvpSV2DvXQovMb57mhAWs9BlVj3UIviHBMQYXc9RUiyoTBYphqQi5THsQafEFEA+3EJ\/NLhqF4CTRZoxMk+VDZbQCCYk0SNEDvDnhEUCIQW1KDg8HDaHrCcRE8DKwi1dgDjASwcUeDuaFto0WrUaj8FdOvaIwjLKYC9DUgsPel+FOLNkg0cPi0vuXb1CGZ era@domain.com","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"era_ip","type":"LOCAL","value":"10.45.5.40","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"kube_namespace","type":"LOCAL","value":"cloudnative","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"kubemaster_ip","type":"LOCAL","value":"10.48.11.252","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"network_profile","type":"LOCAL","value":"DEFAULT_OOB_NETWORK","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"sla_name","type":"LOCAL","value":"GOLD","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"software_profile","type":"LOCAL","value":"POSTGRES_10.4_OOB","label":"","editables":{"value":true}},{"val_type":"STRING","description":"","name":"epoch_prefix","type":"LOCAL","value":"michael","label":"","attrs":{"type":""},"editables":{"value":true}},{"val_type":"STRING","description":"","name":"centos_public_key","type":"LOCAL","value":"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDX\/qHoHcg5s1pyMfR+8w30I8TOGJzwonSKmWXQh0G+OZWMH78bsGnnmqeWhTzic6uCTm+HlyBnKiVqHlLixXMKcjsgmb\/QoU18JX9SocQEJkCYYjimBx94c+4TT2bAOIB\/uXi56WM5L8LPZPNIZR5cy6DxNibL2bH9J\/oO5In\/RN6oY6qhX04LM3qRV6NUw0lItD\/CVxF8xHli5Pm25X4woF+hrbYMMQ6JVWtRz5VAz8P9Zmn1IJgkvS6zoe7GXUwu4t+BXTvBGz7ueD8XZzIr3eNg8+6aVRi2OP6hDcDyeJn6CtvfH7fNoQ2jMV3URHfWrUMrfJmAYHFKcZ+djKcj centos@nutanix.com","label":"","attrs":{"type":""}}]}],"published_service_definition_list":[{"singleton":true,"action_list":[],"type":"K8S_SERVICE","depends_on_list":[],"name":"oscar_django_service","port_list":[],"tier":"","options":{"type":"PROVISION_K8S_SERVICE","spec":{"type":"LoadBalancer","ports":[{"targetPort":8000,"protocol":"TCP","port":80}],"selector":{"app":"django-@@{Era.TIMESTAMP}@@"}},"metadata":{"labels":{"tier":"frontend","app":"django-@@{Era.TIMESTAMP}@@","component":"oscar","time":"@@{calm_unique}@@"},"namespace":"@@{kube_namespace}@@","name":"oscar-django-service"}},"variable_list":[],"description":""}],"default_credential_local_reference":{"kind":"app_credential","name":"era_creds"},"type":"USER"},"name":"NutanixCloudNativeDemo"},"api_version":"3.0","metadata":{"last_update_time":"1562761793112242","kind":"blueprint","spec_version":36,"creation_time":"1555510400327891","name":"NutanixCloudNativeDemo"}}
